{"version":3,"sources":["webpack:///webpack/bootstrap 291cca425a6f87a3ed3d","webpack:///./studio/main_dev.js","webpack:///./studio/Properties.js","webpack:///external \"Studio.libraries['react']\"","webpack:///external \"Studio\""],"names":[],"mappings":"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","file":"./studio/main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 291cca425a6f87a3ed3d\n **/","import Properties from './Properties.js'\r\nimport Studio from 'jsreport-studio'\r\n\r\nStudio.addApiSpec({\r\n  options: {\r\n    language: 'en'\r\n  }\r\n})\r\n\r\nStudio.addPropertiesComponent(Properties.title, Properties, (entity) => entity.__entitySet === 'templates')\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/main_dev.js\n **/","import React, { Component } from 'react'\r\n\r\nexport default class Properties extends Component {\r\n  selectData (entities) {\r\n    return Object.keys(entities).filter((k) => entities[k].__entitySet === 'data').map((k) => entities[k])\r\n  }\r\n\r\n  static getSelectedResources (entity, entities) {\r\n    const getName = (s) => {\r\n      const foundData = Object.keys(entities).map((k) => entities[k]).filter((sc) => sc.shortid === s.shortid)\r\n\r\n      return foundData.length ? foundData[0].name : ''\r\n    }\r\n\r\n    return ((entity.resources || {}).items || []).map((d) => ({\r\n      ...d,\r\n      name: getName(d)\r\n    }))\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.removeInvalidDataReferences()\r\n  }\r\n\r\n  componentDidUpdate () {\r\n    this.removeInvalidDataReferences()\r\n  }\r\n\r\n  static title (entity, entities) {\r\n    if (!entity.resources) {\r\n      return 'resources'\r\n    }\r\n\r\n    return `resources: ${entity.resources.defaultLanguage || ''} ` + Properties.getSelectedResources(entity, entities).map((s) => s.name).join(', ')\r\n  }\r\n\r\n  removeInvalidDataReferences () {\r\n    const { entity, entities, onChange } = this.props\r\n\r\n    if (!entity.resources || !entity.resources.items.length) {\r\n      return\r\n    }\r\n\r\n    const updatedResources = entity.resources.items.filter((s) => Object.keys(entities).filter((k) => entities[k].__entitySet === 'data' && entities[k].shortid === s.shortid).length)\r\n\r\n    if (updatedResources.length !== entity.resources.items.length) {\r\n      onChange({ _id: entity._id, resources: { defaultLanguage: entity.defaultLanguage, items: updatedResources } })\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const { entity, entities, onChange } = this.props\r\n    const data = this.selectData(entities)\r\n\r\n    const selectValues = (event, aitems) => {\r\n      const el = event.target\r\n      let items = Object.assign([], items)\r\n\r\n      for (var i = 0; i < el.options.length; i++) {\r\n        if (el.options[i].selected) {\r\n          if (!items.filter((s) => s.shortid === el.options[i].value).length) {\r\n            items.push({ shortid: el.options[i].value })\r\n          }\r\n        } else {\r\n          if (items.filter((s) => s.shortid === el.options[i].value).length) {\r\n            items = items.filter((s) => s.shortid !== el.options[i].value)\r\n          }\r\n        }\r\n      }\r\n\r\n      return items.map((i) => ({ ...i, entitySet: 'data' }))\r\n    }\r\n\r\n    const items = (entity.resources || {}).items || []\r\n    const defaultLanguage = (entity.resources || {}).defaultLanguage\r\n\r\n    return (\r\n      <div className='properties-section'>\r\n        <div className='form-group'><label>Default language <a href='http://jsreport.net/learn/resources' target='_blank'><i className='fa fa-question' /> </a></label>\r\n          <input\r\n            type='text' placeholder='en' value={defaultLanguage || ''}\r\n            onChange={(v) => onChange({_id: entity._id, resources: {defaultLanguage: v.target.value, items: items}})} />\r\n        </div>\r\n        <div className='form-group'>\r\n          <select\r\n            title='Use CTRL to deselect item and also to select multiple options'\r\n            multiple size='7' value={items.map((s) => s.shortid)}\r\n            onChange={(v) => onChange({_id: entity._id, resources: {items: selectValues(v, entity.scripts), defaultLanguage: defaultLanguage}})}>\r\n            {data.map((s) => <option key={s.shortid} value={s.shortid}>{s.name}</option>)}\r\n          </select>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./studio/Properties.js\n **/","module.exports = Studio.libraries['react'];\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio.libraries['react']\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = Studio;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"Studio\"\n ** module id = 3\n ** module chunks = 0\n **/"],"sourceRoot":""}